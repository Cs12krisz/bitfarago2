<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="3.feladat.css">
    <title>Korongós játék</title>
</head>
<body>
<section>
	<h1>Tili-Toli játék</h1>
	<h2>Méret:</h2>
    <p><input type="checkbox"  id="2X2">2x2</p>
    <p><input type="checkbox"  id="6X6">6x6</p>
    <p><button id="setting" onclick="beallit()">Beállít</button></p>
</section>
<br>
	<p id="play2"></p>
    <table style="background:orange; border-color:orange; font-size:2em; text-align:center; margin: auto;" id="puzzle" border="1"></table>
	<p id="play1"></p>
    
 <p style="text-align:center;" id="er"></p>
 <script>
// ======== Tili-Toli tabla feltoltese
    var nrow = 0;
	var ncell = 0;

    // 2X2
    function beallit(){
    document.getElementById("2X2").checked
    document.getElementById("6X6").checked
    if(document.getElementById("2X2").checked){
        nrow = nrow + 2
        ncell = ncell + 2
		document.getElementById("play2").innerHTML = "Játékos 2"
		document.getElementById("play1").innerHTML = "játékos 1"
    var tt  = new Array(nrow);
    var newrow;
  
    for(var i=0;i<nrow;i++){
        newrow=document.getElementById("puzzle").insertRow(i);
        tt[i] = new Array(ncell);
        for(var j=0;j<ncell;j++){
          tt[i][j]=newrow.insertCell(j);
          tt[i][j].id=i*ncell+j;
          tt[i][j].onclick=function(){mystep(this);};
          tt[i][j].style.width="50px";
          tt[i][j].style.height="50px";
          tt[i][j].style.color="#fcfcfc";
          tt[i][j].style.background="#ff3333";
          // A JS 0-tol szamolja a tombelemeket, de a puzzle 1-tol!
      }
    }

	
    // ============ Lepesek kezelese
	function mystep(obj){
	    // Use for testing
		alert('Ooops! '+obj.id+' ('+Math.floor(obj.id/ncell)+', '+obj.id%ncell+')');

		document.getElementById(obj.id).innerHTML= '<img src="x.png" id="x">';
		document.getElementById(obj.id).style.paddingBottom= "0px";
		document.getElementById("x").style.marginBottom= "0px";

        var nid = parseInt(obj.id);
		var nempty = parseInt(empty);
       
		/*
		if (nid+ncell==nempty|| nid-ncell==nempty ||
			nid+1==nempty && nempty%ncell!=0||
			nid-1==nempty && nid%ncell!=0){
			document.getElementById(empty.toString()).innerHTML=document.getElementById(obj.id).innerHTML;
			document.getElementById(empty.toString()).style.background=document.getElementById(obj.id).style.background;
			document.getElementById(obj.id).style.background="#d0d0d0";
			document.getElementById(obj.id).innerHTML="";
			empty=obj.id;
		}
        */
	}
	
	// ============ Cellakevero
	function shuffle(){
		var xwalker;
		var ywalker;
		for(var i=0;i<nrow*ncell*6;i++){
			rowwalker=Math.floor(empty/ncell);
			cellwalker=empty%ncell;
	
			switch(Math.floor(Math.random()*4)) {
			case 0: // right or left
			    cellwalker+=(cellwalker<ncell-1)?1:-1;
				break;
			case 1: // left or right
			    cellwalker+=(cellwalker>0)?-1:1;
				break;
			case 2: // down or up
			    rowwalker+=(rowwalker<nrow-1)?1:-1;
				break;
			case 3: // up or down
				rowwalker+=(rowwalker>0)?-1:1;
				break;
			}
			mystep(document.getElementById((rowwalker*ncell+cellwalker).toString()));
		    }
	    }
    }

    // 6X6
    else if(document.getElementById("6X6").checked){
        nrow = nrow + 6
        ncell = ncell + 6
		document.getElementById("play2").innerHTML = "Játékos 2"
		document.getElementById("play1").innerHTML = "játékos 1"
    var tt  = new Array(nrow);
    var newrow;
  
    for(var i=0;i<nrow;i++){
        newrow=document.getElementById("puzzle").insertRow(i);
        tt[i] = new Array(ncell);
        for(var j=0;j<ncell;j++){
          tt[i][j]=newrow.insertCell(j);
          tt[i][j].id=i*ncell+j;
          tt[i][j].onclick=function(){mystep(this);};
          tt[i][j].style.width="50px";
          tt[i][j].style.height="50px";
          tt[i][j].style.color="#fcfcfc";
          tt[i][j].style.background="#ff3333";
          // A JS 0-tol szamolja a tombelemeket, de a puzzle 1-tol!
      }
    }

	
    // ============ Lepesek kezelese
	function mystep(obj){
	    // Use for testing
        var ertek = 0;
        if(obj.id == 0 || obj.id == 1 || obj.id == 2 || obj.id == 3 || obj.id == 4 || obj.id == 5 || obj.id == 6 || obj.id == 11 || obj.id == 12 || obj.id == 17 ||
        obj.id == 18 || obj.id == 23 || obj.id == 24 || obj.id == 29 || obj.id == 30 || obj.id == 31 || obj.id == 32 ||obj.id == 33 || obj.id == 34 || obj.id == 35){
            document.getElementById("er").innerHTML = ertek+1
        }else if(obj.id == 7 || obj.id == 8 || obj.id == 9 || obj.id == 10 || obj.id == 13 || obj.id == 16 || obj.id == 19 || 
         obj.id == 22 || obj.id == 25 || obj.id == 26 || obj.id == 27 || obj.id == 28){
            document.getElementById("er").innerHTML = ertek+2
        }else{
            document.getElementById("er").innerHTML = ertek+3
        }
		 alert('Ooops! '+obj.id+' ('+Math.floor(obj.id/ncell)+', '+obj.id%ncell+')');
        var nid = parseInt(obj.id);
		var nempty = parseInt(empty);
		/*
		if (nid+ncell==nempty|| nid-ncell==nempty ||
			nid+1==nempty && nempty%ncell!=0||
			nid-1==nempty && nid%ncell!=0){
			document.getElementById(empty.toString()).innerHTML=document.getElementById(obj.id).innerHTML;
			document.getElementById(empty.toString()).style.background=document.getElementById(obj.id).style.background;
			document.getElementById(obj.id).style.background="#d0d0d0";
			document.getElementById(obj.id).innerHTML="";
			empty=obj.id;
		}
        */
	}
	
	// ============ Cellakevero
	function shuffle(){
		var xwalker;
		var ywalker;
		for(var i=0;i<nrow*ncell*6;i++){
			rowwalker=Math.floor(empty/ncell);
			cellwalker=empty%ncell;
	
			switch(Math.floor(Math.random()*4)) {
			case 0: // right or left
			    cellwalker+=(cellwalker<ncell-1)?1:-1;
				break;
			case 1: // left or right
			    cellwalker+=(cellwalker>0)?-1:1;
				break;
			case 2: // down or up
			    rowwalker+=(rowwalker<nrow-1)?1:-1;
				break;
			case 3: // up or down
				rowwalker+=(rowwalker>0)?-1:1;
				break;
			}
			mystep(document.getElementById((rowwalker*ncell+cellwalker).toString()));
		    }
	    }
    }
}

 </script>
</body>
</html>